= render partial: "header"
- breadcrumb :item_show
= render "layouts/breadcrumbs"
.noticeContainer
  -if flash.notice.present?
    .alert.alert-success= flash.notice
.show
  .show__main
    .content
      .content__top
        .item
          %h2.item__name 
            = @item.name
          .item__img
            %ul.item__img__list
              .swiper-container.swiper1
                .swiper-wrapper
                  - @images.each do |images|
                    = image_tag asset_path(images[:content]), class:"swiper-slide"
                .swiper-button-prev.prev1
                .swiper-button-next.next1
                .swiper-pagination
                  
              .swiper-container.swiper2
                .swiper-wrapper
                  - @images.each do |images|
                    = image_tag asset_path(images[:content]), class:"swiper-slide"
          .item__price 
            %span 
              = @item.price 
              å††
            .item__price-tax
              %span 
                (ç¨è¾¼)
              %span 
                é€æ–™è¾¼ã¿
          -if current_user.id == @item.user_id
            =link_to edit_item_path do
              %button{type: "button", class:'item__edit'}
                å•†å“ã®ç·¨é›†
            .or or
            =link_to item_path, method: :delete do
              %button{type: "button", class:'item__delete'}
                ã“ã®å•†å“ã‚’å‰Šé™¤ã™ã‚‹
          -else
            -if @item.purchase_id.present?
              .item__purchase#item__purchase--sold
                å£²ã‚Šåˆ‡ã‚Œã¾ã—ãŸ
            -else 
              =link_to confirm_item_path do
                %button{type: "button", class:'item__purchase'}
                  è³¼å…¥ç”»é¢ã«é€²ã‚€
          .item__description= @item.description
          %table{:border => "1"}
            %tbody
              %tr 
                %th å‡ºå“è€…
                %td 
                  = @user.nickname
              %tr
                %th ã‚«ãƒ†ã‚´ãƒª
                %td
                  = @item.category.parent.parent.name
                  %br
                  = @item.category.parent.name
                  %br
                  = @item.category.name
              %tr
                %th ãƒ–ãƒ©ãƒ³ãƒ‰
                %td= @brand.name
              %tr
                %th å•†å“ã®çŠ¶æ…‹
                %td= @item.condition
              %tr
                %th é…é€æ–™ã®è² æ‹…
                %td= @item.fee
              %tr
                %th ç™ºé€å…ƒã®åœ°åŸŸ
                %td= @area
              %tr
                %th ç™ºé€æ—¥ã®ã‚ç›®å®‰
                %td= @shipping_day
          .option
            %ul.option__like
              %li.option__like-btn1
                %i â­ï¸
                ãŠæ°—ã«å…¥ã‚Š 0
            %ul.option__report
              %li.option__report-btn2
                %i ğŸ‡¯ğŸ‡µ
                ä¸é©åˆ‡ãªå•†å“ã®é€šå ± 
        .commentsContainer
          .comments
            - if @comments
              - @comments.each do |comment|
                -if comment.user_id ==  current_user.id
                  %ul
                    %li.comment
                      .comment__myname
                        = link_to comment.user.nickname, "/users/#{comment.user_id}"
                      .comment__mytext
                        = simple_format(comment.text)
                        .comment__mytext__time
                          = icon('far', 'clock')
                          = render partial: "notification", locals: { comment: comment }
                -else
                  %ul
                    %li.comment
                      -if comment.user_id == @item.user.id
                        .comment__name
                          = link_to "#{comment.user.nickname}(å‡ºå“è€…)", "/users/#{comment.user_id}"
                      -else
                        .comment__name
                          = link_to comment.user.nickname, "/users/#{comment.user_id}"
                      .comment__text
                        = simple_format(comment.text)
                        .comment__text__time
                          = icon('far', 'clock')
                          = render partial: "notification", locals: { comment: comment }
          .commentBox
            %p.caution
              ç›¸æ‰‹ã®ã“ã¨ã‚’è€ƒãˆä¸å¯§ãªã‚³ãƒ¡ãƒ³ãƒˆã‚’å¿ƒãŒã‘ã¾ã—ã‚‡ã†ã€‚
              ä¸å¿«ãªè¨€è‘‰é£ã„ãªã©ã¯åˆ©ç”¨åˆ¶é™ã‚„é€€ä¼šå‡¦åˆ†ã¨ãªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚
            - if current_user
              -if @item.purchase_id.present?
                = form_with(model: [@item, @comment], local: true) do |f|
                  = f.text_area :text, class: "comment-body", id: "comment-body--sold"
                  .comment-btn#comment-btn--sold
                    å£²ã‚Šåˆ‡ã‚Œã®ãŸã‚ã‚³ãƒ¡ãƒ³ãƒˆã§ãã¾ã›ã‚“
              -else
                = form_with(model: [@item, @comment], local: true) do |f|
                  = f.text_area :text, class: "comment-body"
                  = f.submit "ã‚³ãƒ¡ãƒ³ãƒˆã™ã‚‹", class: "comment-btn"
            - else
              %strong
                %p â€»â€»â€» ã‚³ãƒ¡ãƒ³ãƒˆã®æŠ•ç¨¿ã«ã¯æ–°è¦ç™»éŒ²/ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™ â€»â€»â€»
      %ul.switch
        %li.switch__before
          %i <
          å‰ã®å•†å“
        %li.switch__after
          .span å¾Œã‚ã®å•†å“ >
          %i
      .other
        ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹ã‚’ã‚‚ã£ã¨è¦‹ã‚‹
= render partial: "footer"